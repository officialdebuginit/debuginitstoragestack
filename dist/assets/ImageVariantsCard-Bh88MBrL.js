import{u as N,j as e,W as y,a as i,B as d,P as g,r as j,L as w,b as k,C,d as P,T as z,I as A}from"./index-DWqu0pAq.js";import{S as b}from"./Segmented-D3WCwAKb.js";import{W as E}from"./wand-sparkles-DZVZnQCw.js";function u({label:s,tone:l="sky"}){const r={sky:"bg-sky-500/10 text-sky-600 border-sky-500/20",violet:"bg-violet-500/10 text-violet-600 border-violet-500/20",emerald:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"};return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border "+r[l],children:s})}function p({children:s,tone:l}){const r={sky:"bg-sky-500/5 border-sky-500/20",violet:"bg-violet-500/5 border-violet-500/20",emerald:"bg-emerald-500/5 border-emerald-500/20"};return e.jsx("div",{className:"h-full rounded-lg border p-3 "+r[l],children:s})}function q({v:s,idx:l,onChange:r,onRemove:c,defaultPattern:m}){const[o,x]=j.useState(!1),h=j.useMemo(()=>{const a="example",n=s.width??0,v=s.height??0,f=s.format==="avif"?"avif":s.format==="jpeg"?"jpg":"webp";return(s.namePattern&&s.namePattern.trim().length?s.namePattern:m).replaceAll("{base}",a).replaceAll("{w}",String(n)).replaceAll("{h}",String(v)).replaceAll("{format}",s.format).replaceAll("{ext}",f)},[s.width,s.height,s.format,s.namePattern,m]),t=s.mode!=="max"&&(!s.width||!s.height);return e.jsxs("div",{className:"rounded-lg border border-border/30 bg-muted/5",children:[e.jsxs("div",{className:"p-3 grid grid-cols-1 md:grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Width"}),e.jsx(i,{type:"number",value:s.width??"",onChange:a=>r({width:a.target.value?Number(a.target.value):void 0}),placeholder:"auto"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Height"}),e.jsx(i,{type:"number",value:s.height??"",onChange:a=>r({height:a.target.value?Number(a.target.value):void 0}),placeholder:"auto"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Mode"}),e.jsx(b,{ariaLabel:"Resize mode",value:s.mode,onChange:a=>r({mode:a}),options:[{value:"max",label:"Max",icon:e.jsx(w,{size:14})},{value:"cover",label:"Cover",icon:e.jsx(k,{size:14})},{value:"exact",label:"Exact"}]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Format"}),e.jsx(b,{ariaLabel:"Output format",value:s.format,onChange:a=>r({format:a}),options:[{value:"webp",label:"WebP"},{value:"avif",label:"AVIF"},{value:"jpeg",label:"JPEG"}]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Quality"}),e.jsx("span",{children:s.quality})]}),e.jsx("input",{type:"range",min:1,max:100,value:s.quality,onChange:a=>r({quality:Number(a.target.value)}),className:"w-full"})]})]}),e.jsxs("div",{className:"flex  gap-2 w-full  justify-between p-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"border-border/30",onClick:()=>x(a=>!a),children:[o?e.jsx(C,{size:14,className:"mr-2"}):e.jsx(P,{size:14,className:"mr-2"}),"Advanced"]}),e.jsxs(d,{size:"sm",variant:"ghost",onClick:c,children:[e.jsx(z,{size:14,className:"mr-2"}),"Remove"]})]}),o&&e.jsx("div",{className:"px-0 pb-3",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(p,{tone:"sky",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(u,{label:"Constraints",tone:"sky"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.allowUpscale??!1,onChange:a=>r({allowUpscale:a.target.checked})}),e.jsx("span",{children:"Allow upscale"})]}),t&&e.jsxs("div",{className:"text-xs text-amber-600 bg-amber-500/10 border border-amber-500/20 rounded-md px-2 py-1 inline-flex items-center gap-2",children:[e.jsx(A,{size:14}),"This mode requires width and height"]})]})]})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(p,{tone:"violet",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(u,{label:"Encoding",tone:"violet"})}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"}),e.jsx(i,{type:"number",min:0,max:9,value:s.effort??4,onChange:a=>r({effort:Number(a.target.value)})}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Used by AVIF and WebP encoders"})]})})]})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(p,{tone:"emerald",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(u,{label:"Naming",tone:"emerald"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Name pattern"}),e.jsx(i,{value:s.namePattern??"",onChange:a=>r({namePattern:a.target.value}),placeholder:"{base}_{w}x{h}.{ext}"}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Tokens are base w h format ext"}),e.jsxs("div",{className:"text-[11px]",children:["Preview",e.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded bg-emerald-500/10 text-emerald-700 border border-emerald-500/20",children:h})]})]})]})})]})})]})}function _(){const{settings:s,setImages:l}=N(),r=s.images.variants??[],c=s.images.defaultNamePattern??"{base}_{w}x{h}.{ext}";function m(t,a){const n=[...r];n[t]={...n[t],...a},l({variants:n})}function o(){l({variants:[{width:1024,height:1024,mode:"cover",format:"webp",quality:70,namePattern:"{base}_1024.{ext}"},{width:512,height:512,mode:"cover",format:"webp",quality:70,namePattern:"{base}_512.{ext}"},{width:256,height:256,mode:"cover",format:"webp",quality:70,namePattern:"{base}_256.{ext}"}],variantsEnabled:!0})}function x(t){const a=[...r];a.push({width:t,height:t,mode:"cover",format:"webp",quality:70,namePattern:`{base}_${t}.{ext}`}),l({variants:a,variantsEnabled:!0})}function h(){const t=[...r];t.push({width:void 0,height:void 0,mode:"max",format:"webp",quality:75,effort:4,namePattern:""}),l({variants:t,variantsEnabled:!0})}return e.jsxs(y,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Image variants"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Generate multiple sizes on the client for faster delivery"})]}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.images.variantsEnabled??!1,onChange:t=>l({variantsEnabled:t.target.checked})}),e.jsx("span",{children:"Enable"})]}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.images.keepOriginalAlongsideVariants??!1,onChange:t=>l({keepOriginalAlongsideVariants:t.target.checked})}),e.jsx("span",{children:"Keep original"})]})]})]}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Default name pattern"}),e.jsx(i,{value:c,onChange:t=>l({defaultNamePattern:t.target.value}),placeholder:"{base}_{w}x{h}.{ext}"}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Used when a variant does not specify its own pattern"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[r.length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No variants configured yet"}),r.map((t,a)=>e.jsx(q,{v:t,idx:a,defaultPattern:c,onChange:n=>m(a,n),onRemove:()=>{const n=[...r];n.splice(a,1),l({variants:n})}},a))]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(d,{size:"sm",onClick:()=>x(512),children:[e.jsx(g,{size:14,className:"mr-2"}),"Add five hundred twelve square"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:o,className:"border-border/30",children:[e.jsx(E,{size:14,className:"mr-2"}),"Load common sizes"]}),e.jsxs(d,{size:"sm",variant:"ghost",onClick:h,children:[e.jsx(g,{size:14,className:"mr-2"}),"Add custom"]})]})]})}export{_ as I};
