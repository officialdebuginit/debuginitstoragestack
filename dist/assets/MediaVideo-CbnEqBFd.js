import{u as M,j as e,W as z,a as i,F,S as R,L as T,B as c,P as B,T as k}from"./index-DWqu0pAq.js";import{S as n}from"./Segmented-D3WCwAKb.js";import{S as H}from"./settings-2-BSO9O3A_.js";import{S as P}from"./sliders-vertical-SguiAmY0.js";import{W as A}from"./wand-sparkles-DZVZnQCw.js";function x({label:v,tone:l="sky"}){const r={sky:"bg-sky-500/10 text-sky-700 border-sky-500/20",violet:"bg-violet-500/10 text-violet-700 border-violet-500/20",amber:"bg-amber-500/10 text-amber-700 border-amber-500/20",emerald:"bg-emerald-500/10 text-emerald-700 border-emerald-500/20"};return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border "+r[l],children:v})}function u({children:v,tone:l}){const r={sky:"bg-sky-500/5 border-sky-500/20",violet:"bg-violet-500/5 border-violet-500/20",amber:"bg-amber-500/5 border-amber-500/20",emerald:"bg-emerald-500/5 border-emerald-500/20"};return e.jsx("div",{className:"h-full rounded-lg border p-3 "+r[l],children:v})}function E(){var N,y,w,C;const{settings:v,setVideo:l}=M(),r=v.video,j=(s,t=0)=>{const a=Number(s);return Number.isFinite(a)?a:t},b=r.packaging??"hls";function o(s,t){var p,S;const m=[...((p=r.ladder)==null?void 0:p.renditions)??[]];m[s]={...m[s],...t},l({ladder:{segmentSeconds:((S=r.ladder)==null?void 0:S.segmentSeconds)??6,renditions:m}})}function _(s){var m,p;const a=[...((m=r.ladder)==null?void 0:m.renditions)??[]];a.splice(s,1),l({ladder:{segmentSeconds:((p=r.ladder)==null?void 0:p.segmentSeconds)??6,renditions:a}})}function K(s){var a,m;const t=((a=r.ladder)==null?void 0:a.renditions)??[];l({ladder:{segmentSeconds:((m=r.ladder)==null?void 0:m.segmentSeconds)??6,renditions:[...t,s]}})}function V(){l({ladder:{segmentSeconds:6,renditions:[{name:"240p",width:426,height:240,videoBitrateKbps:400,audioBitrateKbps:64,crf:23,preset:"veryfast",profile:"main",gopSeconds:2},{name:"360p",width:640,height:360,videoBitrateKbps:800,audioBitrateKbps:96,crf:23,preset:"veryfast",profile:"main",gopSeconds:2},{name:"720p",width:1280,height:720,videoBitrateKbps:2500,audioBitrateKbps:128,crf:23,preset:"veryfast",profile:"high",gopSeconds:2}]}})}const h=((N=r.variants)==null?void 0:N.items)??[];function d(s,t){const a=[...h];a[s]={...a[s],...t},l({variants:{items:a}})}function L(s){const t=[...h];t.splice(s,1),l({variants:{items:t}})}function g(s){l({variants:{items:[...h,s]}})}function f(s){if(s==="mp4_720"){g({name:"mp4_720",width:1280,height:720,padToExact:!1,mode:"crf",crf:23,vcodec:"h264",acodec:"aac",container:"mp4",audioBitrateKbps:128,preset:"veryfast",profile:"high",namePattern:"{base}_720_{vcodec}.{ext}"});return}if(s==="webm_480"){g({name:"webm_480",width:854,height:480,padToExact:!1,mode:"crf",crf:32,vcodec:"vp9",acodec:"opus",container:"webm",audioBitrateKbps:96,namePattern:"{base}_480_webm.{ext}"});return}if(s==="hevc_1080"){g({name:"hevc_1080",width:1920,height:1080,mode:"crf",crf:28,vcodec:"h265",acodec:"aac",container:"mp4",audioBitrateKbps:128,preset:"veryfast",namePattern:"{base}_1080_hevc.{ext}"});return}g({name:"av1_1080",width:1920,height:1080,mode:"crf",crf:35,vcodec:"av1",acodec:"opus",container:"mkv",audioBitrateKbps:128,namePattern:"{base}_1080_av1.{ext}"})}return e.jsxs(z,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Video"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Choose pass through, lossless remux, classic HLS, modern HLS ladder, or export variants"})]}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r.enabled,onChange:s=>l({enabled:s.target.checked})}),e.jsx("span",{children:"Enabled"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"lg:col-span-5",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Packaging"}),e.jsx(n,{ariaLabel:"Video packaging",value:b,onChange:s=>l({packaging:s}),options:[{value:"pass",label:"Pass"},{value:"hls",label:"HLS"}]})]}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(u,{tone:"amber",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:14}),e.jsx(x,{label:"Browser threshold",tone:"amber"})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Process if size is at most MB"}),e.jsx(i,{type:"number",min:1,value:r.onlyIfSmallerThanMBForBrowser??100,onChange:s=>l({onlyIfSmallerThanMBForBrowser:Math.max(1,j(s.target.value,100))})}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Larger files can be deferred to a job runner"})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(u,{tone:"emerald",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{size:14}),e.jsx(x,{label:"Remux options",tone:"emerald"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Strip metadata during remux"}),e.jsx(n,{ariaLabel:"Strip metadata",value:r.stripMetadata??!0?"on":"off",onChange:s=>l({stripMetadata:s==="on"}),options:[{value:"off",label:"Off"},{value:"on",label:"On"}]})]})]})})]}),b==="hls"&&e.jsx("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(u,{tone:"sky",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:14}),e.jsx(x,{label:"HLS packaging",tone:"sky"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Segment length seconds"}),e.jsx(i,{type:"number",min:2,max:20,value:r.hls.segmentSeconds,onChange:s=>l({hls:{...r.hls,segmentSeconds:Math.max(2,j(s.target.value,6))}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Use stream copy"}),e.jsx(n,{ariaLabel:"Copy if possible",value:r.hls.copyIfPossible?"on":"off",onChange:s=>l({hls:{...r.hls,copyIfPossible:s==="on"}}),options:[{value:"off",label:"Off"},{value:"on",label:"On"}]})]})]})]})})}),b==="hls_ladder"&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(u,{tone:"sky",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{size:14}),e.jsx(x,{label:"Ladder output",tone:"sky"})]}),e.jsx(c,{size:"sm",variant:"outline",onClick:V,children:"Load common ladder"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Segment length seconds"}),e.jsx(i,{type:"number",min:2,max:20,value:((y=r.ladder)==null?void 0:y.segmentSeconds)??6,onChange:s=>{var t;return l({ladder:{segmentSeconds:Math.max(2,j(s.target.value,6)),renditions:((t=r.ladder)==null?void 0:t.renditions)??[]}})}})]}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Smaller segments reduce latency and increase request count"})]})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(u,{tone:"violet",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{size:14}),e.jsx(x,{label:"Renditions",tone:"violet"})]}),e.jsxs(c,{size:"sm",onClick:()=>K({name:"1080p",width:1920,height:1080,videoBitrateKbps:4500,audioBitrateKbps:160,crf:22,preset:"veryfast",profile:"high",gopSeconds:2}),children:[e.jsx(B,{size:14,className:"mr-2"}),"Add rendition"]})]}),(((w=r.ladder)==null?void 0:w.renditions)??[]).length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No renditions yet. Load the common ladder or add one."}),e.jsx("div",{className:"space-y-3",children:(((C=r.ladder)==null?void 0:C.renditions)??[]).map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-12 gap-2 items-end rounded-md border border-violet-500/20 bg-violet-500/5 p-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Name"}),e.jsx(i,{value:s.name??"",onChange:a=>o(t,{name:a.target.value}),placeholder:"label"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Width"}),e.jsx(i,{type:"number",value:s.width??"",onChange:a=>o(t,{width:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Height"}),e.jsx(i,{type:"number",value:s.height??"",onChange:a=>o(t,{height:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Pad to exact"}),e.jsx(n,{ariaLabel:"Pad to exact",value:s.padToExact?"on":"off",onChange:a=>o(t,{padToExact:a==="on"}),options:[{value:"off",label:"Off"},{value:"on",label:"On"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Video kbps"}),e.jsx(i,{type:"number",value:s.videoBitrateKbps,onChange:a=>o(t,{videoBitrateKbps:Number(a.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Audio kbps"}),e.jsx(i,{type:"number",value:s.audioBitrateKbps,onChange:a=>o(t,{audioBitrateKbps:Number(a.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"CRF"}),e.jsx(i,{type:"number",min:0,max:51,value:s.crf??23,onChange:a=>o(t,{crf:Number(a.target.value)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Preset"}),e.jsx(n,{ariaLabel:"Preset",value:s.preset??"veryfast",onChange:a=>o(t,{preset:a}),options:[{value:"ultrafast",label:"Ultra"},{value:"superfast",label:"Super"},{value:"veryfast",label:"Very"},{value:"faster",label:"Faster"},{value:"fast",label:"Fast"},{value:"medium",label:"Medium"},{value:"slow",label:"Slow"},{value:"slower",label:"Slower"},{value:"veryslow",label:"Very slow"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Profile"}),e.jsx(n,{ariaLabel:"Profile",value:s.profile??"high",onChange:a=>o(t,{profile:a}),options:[{value:"baseline",label:"Baseline"},{value:"main",label:"Main"},{value:"high",label:"High"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"GOP seconds"}),e.jsx(i,{type:"number",min:1,max:10,value:s.gopSeconds??2,onChange:a=>o(t,{gopSeconds:Number(a.target.value)})})]}),e.jsx("div",{className:"md:col-span-12 flex justify-end",children:e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>_(t),children:[e.jsx(k,{size:14,className:"mr-2"}),"Remove"]})})]},t))})]})})]}),b==="variants"&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(u,{tone:"emerald",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap=2",children:[e.jsx(A,{size:14}),e.jsx(x,{label:"Presets",tone:"emerald"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>f("mp4_720"),children:"MP4 H two six four Seven twenty"}),e.jsx(c,{variant:"outline",onClick:()=>f("webm_480"),children:"WebM VP nine Four eighty"}),e.jsx(c,{variant:"outline",onClick:()=>f("hevc_1080"),children:"HEVC H two six five Ten eighty"}),e.jsx(c,{variant:"outline",onClick:()=>f("av1_1080"),children:"AV one Ten eighty"}),e.jsxs(c,{onClick:()=>g({name:"custom",width:1280,height:720,mode:"crf",crf:23,vcodec:"h264",acodec:"aac",container:"mp4",audioBitrateKbps:128,namePattern:"{base}_{w}x{h}_{vcodec}.{ext}"}),children:[e.jsx(B,{size:14,className:"mr-2"}),"Add empty"]})]})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(u,{tone:"violet",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{size:14}),e.jsx(x,{label:"Variants",tone:"violet"})]})}),h.length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No variants yet. Add a preset or create one."}),e.jsx("div",{className:"space-y-3",children:h.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-12 gap-2 items-end rounded-md border border-violet-500/20 bg-violet-500/5 p-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Name"}),e.jsx(i,{value:s.name??"",onChange:a=>d(t,{name:a.target.value}),placeholder:"label"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Width"}),e.jsx(i,{type:"number",value:s.width??"",onChange:a=>d(t,{width:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Height"}),e.jsx(i,{type:"number",value:s.height??"",onChange:a=>d(t,{height:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Pad to exact"}),e.jsx(n,{ariaLabel:"Pad to exact",value:s.padToExact?"on":"off",onChange:a=>d(t,{padToExact:a==="on"}),options:[{value:"off",label:"Off"},{value:"on",label:"On"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Frame rate"}),e.jsx(i,{type:"number",min:1,max:120,value:s.fps??"",onChange:a=>d(t,{fps:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Rate control"}),e.jsx(n,{ariaLabel:"Rate control",value:s.mode??"crf",onChange:a=>d(t,{mode:a}),options:[{value:"crf",label:"CRF"},{value:"vbr",label:"VBR"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"CRF"}),e.jsx(i,{type:"number",min:0,max:51,value:s.crf??23,onChange:a=>d(t,{crf:Number(a.target.value)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Video kbps"}),e.jsx(i,{type:"number",value:s.videoBitrateKbps??"",onChange:a=>d(t,{videoBitrateKbps:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Audio kbps"}),e.jsx(i,{type:"number",value:s.audioBitrateKbps??"",onChange:a=>d(t,{audioBitrateKbps:a.target.value?Number(a.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Preset"}),e.jsx(n,{ariaLabel:"Preset",value:s.preset??"veryfast",onChange:a=>d(t,{preset:a}),options:[{value:"ultrafast",label:"Ultra"},{value:"superfast",label:"Super"},{value:"veryfast",label:"Very"},{value:"faster",label:"Faster"},{value:"fast",label:"Fast"},{value:"medium",label:"Medium"},{value:"slow",label:"Slow"},{value:"slower",label:"Slower"},{value:"veryslow",label:"Very slow"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Profile"}),e.jsx(n,{ariaLabel:"Profile",value:s.profile??"high",onChange:a=>d(t,{profile:a}),options:[{value:"baseline",label:"Baseline"},{value:"main",label:"Main"},{value:"high",label:"High"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Video codec"}),e.jsx(n,{ariaLabel:"Video codec",value:s.vcodec,onChange:a=>d(t,{vcodec:a}),options:[{value:"h264",label:"H two six four"},{value:"h265",label:"H two six five"},{value:"vp9",label:"VP nine"},{value:"av1",label:"AV one"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Audio codec"}),e.jsx(n,{ariaLabel:"Audio codec",value:s.acodec,onChange:a=>d(t,{acodec:a}),options:[{value:"aac",label:"AAC"},{value:"opus",label:"Opus"}]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Container"}),e.jsx(n,{ariaLabel:"Container",value:s.container,onChange:a=>d(t,{container:a}),options:[{value:"mp4",label:"MP four"},{value:"webm",label:"WebM"},{value:"mkv",label:"Matroska"}]})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Name pattern"}),e.jsx(i,{value:s.namePattern??"{base}_{w}x{h}_{vcodec}.{ext}",onChange:a=>d(t,{namePattern:a.target.value})})]}),e.jsx("div",{className:"md:col-span-12 flex justify-end",children:e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>L(t),children:[e.jsx(k,{size:14,className:"mr-2"}),"Remove"]})})]},t))})]})})]}),e.jsx("div",{className:"mt-4 flex justify-end gap-2",children:e.jsx(c,{variant:"outline",className:"border-border/30",onClick:()=>l({enabled:!0,packaging:"hls",hls:{segmentSeconds:6,copyIfPossible:!0},onlyIfSmallerThanMBForBrowser:100,stripMetadata:!0,ladder:{segmentSeconds:6,renditions:[{name:"240p",width:426,height:240,videoBitrateKbps:400,audioBitrateKbps:64,crf:23,preset:"veryfast",profile:"main",gopSeconds:2},{name:"360p",width:640,height:360,videoBitrateKbps:800,audioBitrateKbps:96,crf:23,preset:"veryfast",profile:"main",gopSeconds:2},{name:"720p",width:1280,height:720,videoBitrateKbps:2500,audioBitrateKbps:128,crf:23,preset:"veryfast",profile:"high",gopSeconds:2}]},variants:{items:[{name:"mp4_720",width:1280,height:720,padToExact:!1,mode:"crf",crf:23,vcodec:"h264",acodec:"aac",container:"mp4",audioBitrateKbps:128,preset:"veryfast",profile:"high",namePattern:"{base}_720_{vcodec}.{ext}"},{name:"webm_480",width:854,height:480,padToExact:!1,mode:"crf",crf:32,vcodec:"vp9",acodec:"opus",container:"webm",audioBitrateKbps:96,namePattern:"{base}_480_webm.{ext}"}]}}),children:"Reset video defaults"})})]})}function G(){return e.jsx("div",{className:"space-y-6",children:e.jsx(E,{})})}export{G as default};
