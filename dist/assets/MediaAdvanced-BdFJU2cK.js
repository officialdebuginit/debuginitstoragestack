import{c as A,u as V,r as b,j as e,W as I,B as f,E as B,f as $,D,R as P,g as z,h as U}from"./index-DWqu0pAq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=A("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=A("FileJson2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"fq0c9t"}],["path",{d:"M8 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"4gibmv"}]]);function x({label:r,tone:s="sky"}){const d={sky:"bg-sky-500/10 text-sky-700 border-sky-500/20",violet:"bg-violet-500/10 text-violet-700 border-violet-500/20",amber:"bg-amber-500/10 text-amber-700 border-amber-500/20",emerald:"bg-emerald-500/10 text-emerald-700 border-emerald-500/20",rose:"bg-rose-500/10 text-rose-700 border-rose-500/20"};return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border "+d[s],children:r})}function W(r){var i,g;const s={errors:[],warnings:[],info:[]},d=r.general;if(!d)s.errors.push("General settings are missing.");else{typeof d.enableInBrowserProcessing!="boolean"&&s.errors.push("Enable in browser processing must be a boolean.");const a=Number(d.maxConcurrentJobs);(!Number.isFinite(a)||a<1||a>4)&&s.warnings.push("Max concurrent jobs should be between one and four.")}const t=r.images;if(!t)s.errors.push("Image settings are missing.");else if(t.enabled&&(t.format!=="webp"&&t.format!=="avif"&&t.format!=="jpeg"&&s.errors.push("Image format must be webp avif or jpeg."),t.quality>=1&&t.quality<=100||s.errors.push("Image quality must be between one and one hundred."),t.variantsEnabled)){const a=Array.isArray(t.variants)?t.variants:[];a.length===0&&s.warnings.push("Multiple size generation is on but no variants are defined."),a.forEach((c,h)=>{c.quality>=1&&c.quality<=100||s.errors.push(`Variant ${h+1} quality must be between one and one hundred.`),c.mode||s.warnings.push(`Variant ${h+1} has no resize mode.`)})}const m=r.audio;if(!m)s.errors.push("Audio settings are missing.");else if(m.enabled&&m.packaging==="hls_ladder"){const a=m.audioHls;a?((!Array.isArray(a.renditions)||a.renditions.length===0)&&s.errors.push("Audio HLS must include at least one rendition."),a.codec!=="aac"&&a.codec!=="opus"&&s.errors.push("Audio HLS codec must be aac or opus.")):s.errors.push("Audio HLS configuration is required.")}const n=r.video;if(!n)s.errors.push("Video settings are missing.");else if(n.enabled){const a=n.packaging;["pass","remux","hls","hls_ladder","variants"].includes(a)||s.errors.push("Video packaging must be pass remux hls hls ladder or variants."),a==="hls"&&(n.hls?n.hls.segmentSeconds>=2&&n.hls.segmentSeconds<=20||s.warnings.push("HLS segment length should be between two and twenty seconds."):s.errors.push("HLS configuration is required.")),a==="hls_ladder"&&(((i=n.ladder)==null?void 0:i.renditions)??[]).length===0&&s.errors.push("HLS ladder requires at least one rendition."),a==="variants"&&(((g=n.variants)==null?void 0:g.items)??[]).length===0&&s.errors.push("Variants packaging requires at least one variant.")}return s.info.push("This validation is static and runs in the browser."),s}function _(){var p,v,j,N,y,w,k,C,S,L,M,E,J,O,q;const{settings:r,reset:s}=V(),[d,t]=b.useState(!0),[m,n]=b.useState(!1),i=b.useMemo(()=>W(r),[r]);async function g(){await navigator.clipboard.writeText(JSON.stringify(r,null,2)),n(!0),setTimeout(()=>n(!1),1200)}function a(){const o=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),l=URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download="media-settings.json",document.body.appendChild(u),u.click(),u.remove(),URL.revokeObjectURL(l)}const c=((v=(p=r.images)==null?void 0:p.variants)==null?void 0:v.length)??0,h=((y=(N=(j=r.audio)==null?void 0:j.audioHls)==null?void 0:N.renditions)==null?void 0:y.length)??0,H=((C=(k=(w=r.video)==null?void 0:w.ladder)==null?void 0:k.renditions)==null?void 0:C.length)??0,R=((M=(L=(S=r.video)==null?void 0:S.variants)==null?void 0:L.items)==null?void 0:M.length)??0;return e.jsxs(I,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{size:18,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Current configuration"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Preview the active settings and review validation results"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",onClick:()=>t(o=>!o),children:[d?e.jsx(F,{size:14,className:"mr-2"}):e.jsx(B,{size:14,className:"mr-2"}),d?"Hide JSON":"Show JSON"]}),e.jsxs(f,{variant:"outline",onClick:g,children:[e.jsx($,{size:14,className:"mr-2"}),m?"Copied":"Copy JSON"]}),e.jsxs(f,{onClick:a,children:[e.jsx(D,{size:14,className:"mr-2"}),"Download JSON"]}),e.jsxs(f,{variant:"outline",onClick:s,children:[e.jsx(P,{size:14,className:"mr-2"}),"Reset defaults"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"rounded-lg border border-emerald-500/20 bg-emerald-500/5 p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Browser processing"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(x,{label:(E=r.general)!=null&&E.enableInBrowserProcessing?"Enabled":"Disabled",tone:(J=r.general)!=null&&J.enableInBrowserProcessing?"emerald":"rose"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Max ",((O=r.general)==null?void 0:O.maxConcurrentJobs)??1]})]})]}),e.jsxs("div",{className:"rounded-lg border border-sky-500/20 bg-sky-500/5 p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Image variants"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(x,{label:`${c} items`,tone:"sky"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(q=r.images)!=null&&q.variantsEnabled?"On":"Off"})]})]}),e.jsxs("div",{className:"rounded-lg border border-violet-500/20 bg-violet-500/5 p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Video ladder renditions"}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{label:`${H} items`,tone:"violet"})})]}),e.jsxs("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/5 p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Video export variants"}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{label:`${R} items`,tone:"amber"})})]}),e.jsxs("div",{className:"rounded-lg border border-emerald-500/20 bg-emerald-500/5 p-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Audio HLS renditions"}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{label:`${h} items`,tone:"emerald"})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-lg border border-rose-500/20 bg-rose-500/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(z,{size:14,className:"text-rose-500"}),"Errors",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.errors.length,")"]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[i.errors.length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No errors found."}),i.errors.map((o,l)=>e.jsx("div",{className:"text-xs text-rose-700",children:o},l))]})]}),e.jsxs("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(z,{size:14,className:"text-amber-500"}),"Warnings",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.warnings.length,")"]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[i.warnings.length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No warnings found."}),i.warnings.map((o,l)=>e.jsx("div",{className:"text-xs text-amber-700",children:o},l))]})]}),e.jsxs("div",{className:"rounded-lg border border-emerald-500/20 bg-emerald-500/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(U,{size:14,className:"text-emerald-500"}),"Info",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.info.length,")"]})]}),e.jsx("div",{className:"mt-2 space-y-1",children:i.info.map((o,l)=>e.jsx("div",{className:"text-xs text-emerald-700",children:o},l))})]})]}),d&&e.jsx("div",{className:"mt-4",children:e.jsx("pre",{className:"text-xs bg-muted/10 border border-border/30 rounded-md p-3 overflow-auto max-h-96",children:JSON.stringify(r,null,2)})})]})}function K(){return e.jsx("div",{className:"space-y-6",children:e.jsx(_,{})})}export{K as default};
