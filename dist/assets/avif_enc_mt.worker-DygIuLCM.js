var e={},n=!1;function o(...a){var s=a.join(" ");console.error(s)}function c(...a){var s=a.join(" ");postMessage({cmd:"alert",text:s,threadId:e._pthread_self()})}var l=o;self.alert=c;e.instantiateWasm=(a,s)=>{var r=e.wasmModule;e.wasmModule=null;var t=new WebAssembly.Instance(r,a);return s(t)};self.onunhandledrejection=a=>{throw a.reason||a};function i(a){var s;try{if(a.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{e=t,postMessage({cmd:"loaded"});for(let d of r)i(d);self.onmessage=i},e.wasmModule=a.data.wasmModule;for(const t of a.data.handlers)e[t]=(...d)=>{postMessage({cmd:"callHandler",handler:t,args:d})};e.wasmMemory=a.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,(a.data.urlOrBlob?import(a.data.urlOrBlob):import("./avif_enc_mt-CCXqe0MK.js")).then(t=>t.default(e))}else if(a.data.cmd==="run"){e.__emscripten_thread_init(a.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(a.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(a.data),e.PThread.threadInitTLS(),n||(e.__embind_initialize_bindings(),n=!0);try{e.invokeEntryPoint(a.data.start_routine,a.data.arg)}catch(r){if(r!="unwind")throw r}}else a.data.cmd==="cancel"?e._pthread_self()&&e.__emscripten_thread_exit(-1):a.data.target==="setimmediate"||(a.data.cmd==="checkMailbox"?n&&e.checkMailbox():a.data.cmd&&(l(`worker.js received unknown command ${a.data.cmd}`),l(a.data)))}catch(r){throw(s=e.__emscripten_thread_crashed)==null||s.call(e),r}}self.onmessage=i;
