import{c as H,u as k,j as e,W as S,a as p,B as m,P as z,T as C}from"./index-DWqu0pAq.js";import{S as r}from"./Segmented-D3WCwAKb.js";import{S as R}from"./settings-2-BSO9O3A_.js";import{S as M}from"./sliders-vertical-SguiAmY0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=H("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);function h({label:c,tone:i="sky"}){const t={sky:"bg-sky-500/10 text-sky-700 border-sky-500/20",violet:"bg-violet-500/10 text-violet-700 border-violet-500/20",amber:"bg-amber-500/10 text-amber-700 border-amber-500/20"};return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border "+t[i],children:c})}function g({children:c,tone:i}){const t={sky:"bg-sky-500/5 border-sky-500/20",violet:"bg-violet-500/5 border-violet-500/20",amber:"bg-amber-500/5 border-amber-500/20"};return e.jsx("div",{className:"h-full rounded-lg border p-3 "+t[i],children:c})}function B(){const{settings:c,setAudio:i}=k(),t=c.audio,x=(s,n=0)=>{const a=Number(s);return Number.isFinite(a)?a:n};function u(s,n){var o;const l=[...((o=t.audioHls)==null?void 0:o.renditions)??[]];l[s]={...l[s],...n},i({audioHls:{...t.audioHls,renditions:l}})}function j(s){var l;const a=[...((l=t.audioHls)==null?void 0:l.renditions)??[]];a.splice(s,1),i({audioHls:{...t.audioHls,renditions:a}})}function f(s){var a;const n=((a=t.audioHls)==null?void 0:a.renditions)??[];i({audioHls:{...t.audioHls,renditions:[...n,s]}})}function v(s){var a,l,o;const n={segmentSeconds:((a=t.audioHls)==null?void 0:a.segmentSeconds)??6,segmentType:((l=t.audioHls)==null?void 0:l.segmentType)??"fmp4",codec:((o=t.audioHls)==null?void 0:o.codec)??"aac"};if(s==="speech"){i({packaging:"hls_ladder",audioHls:{...n,codec:"opus",segmentSeconds:20,renditions:[{name:"low",audioBitrateKbps:48,sampleRateHz:48e3,channels:1},{name:"mid",audioBitrateKbps:64,sampleRateHz:48e3,channels:1},{name:"high",audioBitrateKbps:96,sampleRateHz:48e3,channels:1}]}});return}i({packaging:"hls_ladder",audioHls:{...n,codec:"aac",segmentSeconds:10,renditions:[{name:"low",audioBitrateKbps:96,sampleRateHz:44100,channels:2},{name:"mid",audioBitrateKbps:128,sampleRateHz:44100,channels:2},{name:"high",audioBitrateKbps:192,sampleRateHz:48e3,channels:2}]}})}function N(s){const n=t.audioHls??{codec:s,segmentSeconds:6,segmentType:"fmp4",renditions:[]};let a=n.renditions??[];s==="opus"&&(a=a.map(l=>{const o=l.sampleRateHz&&l.sampleRateHz!==48e3?48e3:l.sampleRateHz??48e3,y=l.channels??2;return{...l,sampleRateHz:o,channels:y}})),i({audioHls:{...n,codec:s,renditions:a}})}const b=t.packaging??"lossless",d=t.audioHls??{codec:"aac",segmentSeconds:6,segmentType:"fmp4",renditions:[]};return e.jsxs(S,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Audio"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Optimize audio and package HLS renditions in the browser"})]}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:s=>i({enabled:s.target.checked})}),e.jsx("span",{children:"Enabled"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"lg:col-span-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Mode"}),e.jsx(r,{ariaLabel:"Audio mode",value:b,onChange:s=>i({packaging:s}),options:[{value:"pass",label:"Pass"},{value:"hls_ladder",label:"HLS ladder"}]})]}),e.jsxs("div",{className:"lg:col-span-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Convert WAV"}),e.jsx(r,{ariaLabel:"WAV to FLAC",value:t.wavToFlac?"on":"off",onChange:s=>i({wavToFlac:s==="on"}),options:[{value:"off",label:"Off"},{value:"on",label:"WAV to FLAC"}]})]}),e.jsxs("div",{className:"lg:col-span-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Strip metadata"}),e.jsx(r,{ariaLabel:"Strip metadata",value:t.stripMetadata?"on":"off",onChange:s=>i({stripMetadata:s==="on"}),options:[{value:"off",label:"Off"},{value:"on",label:"On"}]})]})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-12 gap-3",children:e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(g,{tone:"amber",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:14}),e.jsx(h,{label:"Threshold",tone:"amber"})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Only if larger than MB"}),e.jsx(p,{type:"number",min:0,value:t.onlyIfLargerThanMB??5,onChange:s=>i({onlyIfLargerThanMB:Math.max(0,x(s.target.value,5))})}),e.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Skip optimization for tiny files"})]})]})})}),b==="hls_ladder"&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-3",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(g,{tone:"sky",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{size:14}),e.jsx(h,{label:"HLS output",tone:"sky"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Codec"}),e.jsx(r,{ariaLabel:"Audio codec",value:d.codec,onChange:s=>N(s),options:[{value:"aac",label:"AAC"},{value:"opus",label:"Opus"}]}),e.jsx("div",{className:"text-[11px] text-muted-foreground mt-1",children:"Opus is great for speech. AAC is widely supported."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Segment length seconds"}),e.jsx(p,{type:"number",min:2,max:30,value:d.segmentSeconds??6,onChange:s=>i({audioHls:{...d,segmentSeconds:Math.max(2,x(s.target.value,6))}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Container"}),e.jsx(r,{ariaLabel:"Segment container",value:d.segmentType??"fmp4",onChange:s=>i({audioHls:{...d,segmentType:s}}),options:[{value:"fmp4",label:"fMP4"},{value:"ts",label:"MPEG TS"}]}),e.jsx("div",{className:"text-[11px] text-muted-foreground mt-1",children:"fMP4 works well with modern players. MPEG TS maximizes compatibility."})]})]})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(g,{tone:"violet",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:14}),e.jsx(h,{label:"Renditions",tone:"violet"})]}),e.jsxs("div",{className:"grid sm:grid-cols-3  gap-2",children:[e.jsx(m,{size:"sm",variant:"outline",onClick:()=>v("speech"),children:"Speech preset"}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>v("music"),children:"Music preset"}),e.jsxs(m,{size:"sm",onClick:()=>f({name:"new",audioBitrateKbps:96,sampleRateHz:d.codec==="opus"?48e3:44100,channels:2}),children:[e.jsx(z,{size:14,className:"mr-2"}),"Add"]})]})]}),(d.renditions??[]).length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No renditions yet. Use a preset or add one."}),e.jsx("div",{className:"space-y-3",children:(d.renditions??[]).map((s,n)=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-12 gap-2 items-end rounded-md border border-violet-500/20 bg-violet-500/5 p-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Name"}),e.jsx(p,{value:s.name??"",onChange:a=>u(n,{name:a.target.value}),placeholder:"label"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Bitrate kbps"}),e.jsx("span",{children:s.audioBitrateKbps})]}),e.jsx("input",{type:"range",min:32,max:320,value:s.audioBitrateKbps,onChange:a=>u(n,{audioBitrateKbps:x(a.target.value,96)}),className:"w-full"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Sample rate"}),e.jsx(r,{ariaLabel:"Sample rate",value:String(s.sampleRateHz??(d.codec==="opus"?48e3:44100)),onChange:a=>u(n,{sampleRateHz:Number(a)}),options:d.codec==="opus"?[{value:"48000",label:"48k"},{value:"24000",label:"24k"},{value:"16000",label:"16k"}]:[{value:"44100",label:"44.1k"},{value:"48000",label:"48k"}]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channels"}),e.jsx(r,{ariaLabel:"Channels",value:String(s.channels??2),onChange:a=>u(n,{channels:Number(a)}),options:[{value:"1",label:"Mono"},{value:"2",label:"Stereo"}]})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>j(n),children:[e.jsx(C,{size:14,className:"mr-2"}),"Remove"]})}),d.codec==="opus"&&s.sampleRateHz!==48e3&&e.jsx("div",{className:"md:col-span-12 text-[11px] text-amber-600",children:"Opus prefers forty eight kilohertz. Consider switching to forty eight kilohertz to avoid encoder warnings."})]},n))})]})})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2 justify-end",children:e.jsx(m,{variant:"outline",className:"border-border/30",onClick:()=>i({enabled:!0,wavToFlac:!0,stripMetadata:!0,onlyIfLargerThanMB:5,packaging:"hls_ladder",audioHls:{codec:"aac",segmentSeconds:6,segmentType:"fmp4",renditions:[{name:"low",audioBitrateKbps:64,sampleRateHz:44100,channels:2},{name:"mid",audioBitrateKbps:96,sampleRateHz:44100,channels:2},{name:"high",audioBitrateKbps:128,sampleRateHz:48e3,channels:2}]}}),children:"Reset audio defaults"})})]})}function O(){return e.jsx("div",{className:"space-y-6",children:e.jsx(B,{})})}export{O as default};
